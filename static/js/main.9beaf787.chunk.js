(window.webpackJsonptsakslist=window.webpackJsonptsakslist||[]).push([[0],{166:function(e,t,n){e.exports=n(335)},171:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(60),c=n.n(o),s=(n(171),n(16)),u=n(34),i=n.n(u),l=n(39),p=n(26),f=n(64),d=n(131),m=n(132),g=function(e){var t,n=e.input,a=e.meta,o=Object(f.a)(e,["input","meta"]);return a.touched&&a.invalid&&(t=a.error),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},o,n,{placeholder:t})))},k=function(e){if(!e)return"Required"},b=Object(m.a)({form:"login"})((function(e){return r.a.createElement(r.a.Fragment,null,e.token&&r.a.createElement(p.a,{to:"/"}),r.a.createElement("form",{onSubmit:e.handleSubmit},e.errorMessage&&e.errorMessage,r.a.createElement(d.a,{component:g,type:"text",name:"username",validate:[k]}),r.a.createElement(d.a,{component:g,type:"password",name:"password",validate:[k]}),r.a.createElement("button",{type:"submit"},"LogIn")))})),v=n(13),E=n.n(v),O=n(27),h=n(38),T=n(139),S=T.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2/"}),w={getTasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return S.get("?developer=".concat("bazunts","&page=").concat(e,"&sort_field=").concat(t,"&sort_direction=").concat(n)).then((function(e){return e.data})).catch((function(e){return e}))},addTask:function(e){var t=e.username,n=e.email,a=e.text,r=new FormData;return r.append("username",t),r.append("email",n),r.append("text",a),S.post("create?developer=".concat("bazunts"),r).then((function(e){return e.data})).catch((function(e){return e}))},logIn:function(e){var t=e.username,n=e.password,a=new FormData;return a.append("username",t),a.append("password",n),S.post("login?developer=".concat("bazunts"),a).then((function(e){return e.data})).catch((function(e){return e}))},editTask:function(e){var t,n=e.token,a=e.text,r=e.status,o=e.id;return a?((t=new FormData).append("text",a),t.append("token",n)):((t=new FormData).append("status",r),t.append("token",n)),S.post("/edit/".concat(o,"?developer=").concat("bazunts"),t).then((function(e){return e.data})).catch((function(e){return e}))}};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="TASKS/LOGIN/SET_ERROR",A="TASKS/LOGIN/SET_TOKEN",P={errorMessage:null,token:null,isAuthMessage:"\u0414\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0439\u0442\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e"},_=function(e){return{type:x,error:e}},N=function(e){return{type:A,token:e}},M=function(e){return{type:"TASKS/LOGIN/SET_IS_AUTH_MESSAGE",message:e}},C=function(){return function(e){e(N(null)),e(N(window.localStorage.setItem("token",""))),e(M("\u0414\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0439\u0442\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e"))}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return j({},e,{errorMessage:t.error});case A:return j({},e,{token:t.token});case"TASKS/LOGIN/SET_IS_AUTH_MESSAGE":return j({},e,{isAuthMessage:t.message});default:return e}},D=n(10),G=Object(D.a)((function(e){return e.login.token}),(function(e){return e})),K=Object(D.a)((function(e){return e.login.errorMessage}),(function(e){return e})),R=Object(s.b)((function(e){return{token:G(e),errorMessage:K(e)}}),{login:function(e){return function(){var t=Object(O.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.logIn(e);case 2:"error"===(a=t.sent).status?n(_(a.message.password)):(n(_(null)),n(N(a.message.token)),n(M("")),window.localStorage.setItem("token",a.message.token));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logOut:C})((function(e){return r.a.createElement(b,Object.assign({},e,{onSubmit:function(t){e.login(t)},logOut:C}))})),L=function(e){var t,n=e.input,a=e.meta,o=Object(f.a)(e,["input","meta"]);return a.touched&&a.invalid&&(t=a.error),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},o,n,{placeholder:t})))},F=function(e){if(!e)return"Required"},z=function(e){var t={};e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required"},U=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null),r.a.createElement(d.a,{component:L,type:"text",name:"username",validate:[F]}),r.a.createElement(d.a,{component:L,type:"email",name:"email",validate:[F,z]}),r.a.createElement(d.a,{component:L,type:"text",name:"text",validate:[F]}),r.a.createElement("button",{type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))},B=i()({paginationActive:{cursor:"pointer",border:"1px solid",background:"#65abd0",color:"#fff",padding:"2px"},pagination:{cursor:"pointer",background:"#fff",color:"#000",padding:"2px",margin:"2px","&:hover":{cursor:"pointer",background:"#65abd0",color:"#000",padding:"2px"}},navigationPage:{marginTop:"10px",marginBottom:"10px"}})((function(e){var t=e.pages,n=e.currentPage,a=e.classes,o=e.setCurrentPage;return r.a.createElement("div",{className:a.navigationPage},t.map((function(e,t){return r.a.createElement("span",{key:t,onClick:function(){return o(e)},className:n===e?a.paginationActive:a.pagination},e)})))})),H=Object(m.a)({form:"new-task"})(i()({wrapperContent:function(e){return{display:"grid",gridTemplateColumns:"repeat(".concat(e.taskTitle.length,", 1fr)")}},title:{cursor:"pointer",fontSize:"16px",fontWeight:"bold",paddingLeft:"3px",marginRight:"2px",backgroundColor:"#90e2ff"},content:{fontSize:"14px",margin:"5px",borderBottom:"1px solid #9A9C99"},pagination:{textAlign:"center"},error:{color:"red"}})((function(e){var t=e.tasks,n=e.taskTitle,a=e.classes,o=e.newTask,c=e.addTask,s=e.pages,u=e.currentPage,i=e.setCurrentPage,l=e.setSortSettings,p=e.sort_field,f=e.direction,d=e.token,m=e.isAuthMessage,g=function(t){var n=t.target.dataset.id,a=t.currentTarget.checked?10:0;e.saveStatus(n,a)},k=function(t){var n=t.target.dataset.id,a=t.currentTarget.value;e.saveText(n,a)};return r.a.createElement("div",null,r.a.createElement("span",{className:a.error},m&&m),r.a.createElement("div",null,r.a.createElement("button",{onClick:c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")),r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{className:a.wrapperContent},n.map((function(e){return r.a.createElement("span",{key:Object.keys(e),onClick:function(){return l(Object.keys(e))},className:a.title},Object.values(e),r.a.createElement("span",null,String(Object.keys(e))===p&&f))})),d?t.map((function(e){return Object.keys(e).map((function(t,n){return 10===e[t]||0===e[t]?r.a.createElement("input",{key:n,"data-id":e.id,type:"checkbox",checked:e[t],onChange:g}):"text"===t?r.a.createElement("input",{key:n,"data-id":e.id,type:"text",value:e[t],onChange:k}):r.a.createElement("span",{key:n,className:a.content},e[t])}))})):t.map((function(e){return Object.keys(e).map((function(t,n){return 10===e[t]?r.a.createElement("span",{key:n},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"):0===e[t]?r.a.createElement("span",{key:n},"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"):r.a.createElement("div",{key:n,className:a.content},e[t])}))})),o&&r.a.createElement(U,null))),r.a.createElement("div",{className:a.pagination},r.a.createElement(B,{pages:s,currentPage:u,setCurrentPage:i})))}))),W=Object(D.a)((function(e){return e.tasksPage.editMode}),(function(e){return e})),q=Object(D.a)((function(e){return e.tasksPage.status}),(function(e){return e})),Z=Object(D.a)((function(e){return e.tasksPage.newTask}),(function(e){return e})),J=Object(D.a)((function(e){return e.tasksPage.currentPage}),(function(e){return e})),$=Object(D.a)((function(e){return e.tasksPage.sort_field}),(function(e){return e})),X=Object(D.a)((function(e){return e.tasksPage.direction}),(function(e){return e})),Q=Object(D.a)((function(e){return e.tasksPage.sort_direction}),(function(e){return e})),V=Object(D.a)((function(e){return e.tasksPage.isAuthMessage}),(function(e){return e})),Y=Object(D.a)((function(e){var t=e.tasksPage.tasks;return t.length?Object.keys(t).map((function(e){return{id:t[e].id,username:t[e].username,email:t[e].email,text:t[e].text,status:t[e].status}})):t}),(function(e){return e})),ee=Object(D.a)((function(e){var t=e.tasksPage.taskTitle;return Object.keys(t).map((function(e){return Object(h.a)({},e,t[e])}))}),(function(e){return e})),te=Object(D.a)((function(e){for(var t=e.tasksPage.total_task_count,n=Math.ceil(t/3),a=[],r=1;r<=n;r++)a.push(r);return a}),(function(e){return e})),ne=n(68),ae=n(32);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce="TASKS/MANAGEMENT/ADD_TASK",se="TASKS/MANAGEMENT/SET_TASKS",ue="TASKS/MANAGEMENT/NEW_TASK",ie="TASKS/MANAGEMENT/SET_CURRENT_PAGE",le="TASKS/MANAGEMENT/SET_SORT_FIELD",pe="TASKS/MANAGEMENT/SET_DIRECTION",fe="TASKS/MANAGEMENT/SET_CHANGE_TEXT",de="TASKS/MANAGEMENT/SET_CHANGE_STATUS",me={taskTitle:{id:"id",username:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",email:"E-mail",text:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",status:"\u0421\u0442\u0430\u0442\u0443\u0441"},tasks:[],total_task_count:0,newTask:null,editMode:!1,messageSuccess:null,pages:[],currentPage:1,sort_field:"id",sort_direction:"asc",direction:"/\\"},ge=function(e){return{type:ce,task:e}},ke=function(e,t){return{type:se,tasks:e,total_task_count:t}},be=function(e){return{type:ue,task:e}},ve=function(e,t){return{type:fe,id:e,value:t}},Ee=function(e,t){return{type:de,id:e,value:t}},Oe=function(){return function(){var e=Object(O.a)(E.a.mark((function e(t,n){var a,r,o,c,s,u,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().tasksPage.currentPage,r=n().tasksPage.sort_field,o=n().tasksPage.sort_direction,e.next=5,w.getTasks(a,r,o);case 5:"ok"===(c=e.sent).status?(s=c.message,u=s.tasks,i=s.total_task_count,t(ke(u,i))):console.log(c.message);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return oe({},e,{newTask:t.task});case ce:return oe({},e,{tasks:[].concat(Object(ne.a)(e.tasks),[t.task])});case se:return oe({},e,{tasks:t.tasks,total_task_count:t.total_task_count});case ie:return oe({},e,{currentPage:t.currentPage});case pe:return oe({},e,{sort_direction:"asc"===e.sort_direction?"desc":"asc",direction:"/\\"===e.direction?"\\/":"/\\"});case le:return oe({},e,{sort_field:t.filed[0]});case fe:for(var n=Object(ne.a)(e.tasks),a=0;a<n.length;a++)n[a].id==t.id&&(n[a].text=t.value);return oe({},e,{tasks:n});case de:for(var r=Object(ne.a)(e.tasks),o=0;o<r.length;o++)r[o].id==t.id&&(r[o].status=t.value);return oe({},e,{tasks:r});default:return e}},Te=Object(s.b)((function(e){return{tasks:Y(e),taskTitle:ee(e),editMode:W(e),status:q(e),newTask:Z(e),pages:te(e),currentPage:J(e),sort_field:$(e),direction:X(e),sort_direction:Q(e),token:G(e),isAuthMessage:V(e)}}),{addTask:function(e){return function(){var t=Object(O.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,w.addTask(e);case 3:"ok"===(a=t.sent).status?(alert("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),n(ge(a.message)),n(Oe()),n(be(null)),n(Object(ae.a)("new-task"))):console.log(a.message),t.next=8;break;case 7:n(be({username:"",email:"",text:""}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getTasksAll:Oe,setCurrentPage:function(e){return{type:ie,currentPage:e}},setSortSettings:function(e){return function(t){t({type:le,filed:e}),t({type:pe})}},saveText:function(e,t){return function(){var n=Object(O.a)(E.a.mark((function n(a,r){var o;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===(o=window.localStorage.getItem("token"))){n.next=7;break}return a(ve(e,t)),n.next=5,w.editTask({token:o,text:t,id:e});case 5:n.next=8;break;case 7:a(C());case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},saveStatus:function(e,t){return function(){var n=Object(O.a)(E.a.mark((function n(a,r){var o;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===(o=window.localStorage.getItem("token"))){n.next=7;break}return a(Ee(e,t)),n.next=5,w.editTask({token:o,status:t,id:e});case 5:n.next=8;break;case 7:a(C());case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})((function(e){r.a.useEffect((function(){e.getTasksAll()}),[e.currentPage,e.sort_field,e.sort_direction]);return r.a.createElement(H,Object.assign({},e,{addTask:function(){e.addTask()},onSubmit:function(t){e.addTask(t)}}))})),Se=i()({wrapperContent:{display:"flex",flexDirection:"column"},content:{width:"50%"},navbar:{margin:"10px"},title:{margin:"10px"}})((function(e){var t=e.classes;return r.a.createElement("div",{className:t.wrapperContent},r.a.createElement("div",{className:t.navbar},r.a.createElement(l.b,{to:"/login",className:t.title},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(l.b,{to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(p.b,{path:"/login",render:function(){return r.a.createElement(R,null)}}),r.a.createElement(p.b,{exact:!0,path:"/",render:function(){return r.a.createElement("div",{className:t.content},e.token&&r.a.createElement("button",{onClick:e.logOut},"LogOut"),r.a.createElement(Te,null))}})))})),we=Object(s.b)((function(e){return{token:G(e),errorMessage:K(e)}}),{logOut:C,isAuth:function(){return function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(N(window.localStorage.getItem("token"))),t(M(""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){r.a.useEffect((function(){e.isAuth()}),[]);return r.a.createElement(Se,Object.assign({},e,{logOut:function(){e.logOut()}}))}));var ye=function(){return r.a.createElement("div",null,r.a.createElement(we,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=n(140),xe=n(7),Ae=n(134),Pe=Object(xe.c)({tasksPage:he,login:I,form:Ae.a}),_e=Object(xe.d)(Pe,Object(xe.a)(je.a));window.store=_e;var Ne=_e;c.a.render(r.a.createElement(s.a,{store:Ne},r.a.createElement(l.a,null,r.a.createElement(ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[166,1,2]]]);
//# sourceMappingURL=main.9beaf787.chunk.js.map